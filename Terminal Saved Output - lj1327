Last login: Mon Feb 17 16:08:50 on ttys001

The default interactive shell is now zsh.
To update your account to use zsh, please run `chsh -s /bin/zsh`.
For more details, please visit https://support.apple.com/kb/HT208050.
(base) MacBook-Pro:~ xiwanting$ curl -sL https://ibm.biz/idt-installer | bash
[main] --==[ IBM Cloud Developer Tools for Linux/MacOS - Installer, v1.2.3 ]==--
[install] Starting Installation...
[install] Note: You may be prompted for your 'sudo' password during install.
[install_darwin_deps] Checking for external dependency: brew
[install_darwin_deps] Installing/updating external dependency: git
[install_darwin_deps] Installing/updating external dependency: docker
[install_darwin_deps] Installing/updating external dependency: kubectl
[install_darwin_deps] Installing/updating external dependency: helm
[install_ibmcloud] Updating existing IBM Cloud 'ibmcloud' CLI...
Checking for updates...
No update required. Your CLI is already up-to-date.
[install_ibmcloud] Running 'ibmcloud --version'...
ibmcloud version 0.22.0+5ccbbea-2020-01-21T09:49:02+00:00
[install_plugins] Installing/updating IBM Cloud CLI plugins...
[install_plugins] Checking status of plugin: cloud-functions
[install_plugins] Installing plugin 'cloud-functions'
Looking up 'cloud-functions' from repository 'IBM Cloud'...
Plug-in 'cloud-functions 1.0.36' found in repository 'IBM Cloud'
Attempting to download the binary file...
 12.93 MiB / 12.93 MiB [===========================================] 100.00% 12s
13563184 bytes downloaded
Installing binary...
OK
Plug-in 'cloud-functions 1.0.36' was successfully installed into /Users/xiwanting/.bluemix/plugins/cloud-functions. Use 'ibmcloud plugin show cloud-functions' to show its details.
[install_plugins] Checking status of plugin: cloud-object-storage
[install_plugins] Updating plugin 'cloud-object-storage' from version '1.1.2'
Plug-in 'cloud-object-storage 1.1.2' was installed.
Checking upgrades for plug-in 'cloud-object-storage' from repository 'IBM Cloud'...
No updates are available.
[install_plugins] Checking status of plugin: container-registry
[install_plugins] Updating plugin 'container-registry' from version '0.1.454'
Plug-in 'container-registry 0.1.454' was installed.
Checking upgrades for plug-in 'container-registry' from repository 'IBM Cloud'...
No updates are available.
[install_plugins] Checking status of plugin: container-service
[install_plugins] Installing plugin 'container-service'
Looking up 'container-service' from repository 'IBM Cloud'...
Plug-in 'container-service/kubernetes-service 0.4.66' found in repository 'IBM Cloud'
Attempting to download the binary file...
 26.16 MiB / 26.16 MiB [===========================================] 100.00% 37s
27425716 bytes downloaded
Installing binary...
OK
Plug-in 'container-service 0.4.66' was successfully installed into /Users/xiwanting/.bluemix/plugins/container-service. Use 'ibmcloud plugin show container-service' to show its details.
[install_plugins] Checking status of plugin: dev
[install_plugins] Updating plugin 'dev' from version '2.4.0'
Plug-in 'dev 2.4.0' was installed.
Checking upgrades for plug-in 'dev' from repository 'IBM Cloud'...
No updates are available.
[install_plugins] Running 'ibmcloud plugin list'...
Listing installed plug-ins...

Plugin Name                            Version   Status   
cloud-object-storage                   1.1.2        
container-registry                     0.1.454      
container-service/kubernetes-service   0.4.66       
dev                                    2.4.0        
cloud-functions/wsk/functions/fn       1.0.36       

[install_plugins] Finished installing/updating plugins
[install] Install finished.
[main] --==[ Total time: 69 seconds ]==--
(base) MacBook-Pro:~ xiwanting$ ibmcloud login -a cloud.ibm.com -r us-south -g Default
API endpoint: https://cloud.ibm.com

Email> lj1327@nyu.edu

Password> 
Authenticating...
OK

Targeted account Lingbo Ji's Account (6068a0a54c4849b09ab6339ccef6a3ca)

Targeted resource group Default

Targeted region us-south

                      
API endpoint:      https://cloud.ibm.com   
Region:            us-south   
User:              lj1327@nyu.edu   
Account:           Lingbo Ji's Account (6068a0a54c4849b09ab6339ccef6a3ca)   
Resource group:    Default   
CF API endpoint:      
Org:                  
Space:                

Tip: If you are managing Cloud Foundry applications and services
- Use 'ibmcloud target --cf' to target Cloud Foundry org/space interactively, or use 'ibmcloud target --cf-api ENDPOINT -o ORG -s SPACE' to target the org/space.
- Use 'ibmcloud cf' if you want to run the Cloud Foundry CLI with current IBM Cloud CLI context.

(base) MacBook-Pro:~ xiwanting$ ibmcloud ks cluster config --cluster bp5icu4d069a3hqakrgg
WARNING: The behavior of this command in your current CLI version is deprecated, and becomes unsupported when CLI version 1.0 is released in March 2020. To use the new behavior now, set the 'IKS_BETA_VERSION' environment variable. In bash, run 'export IKS_BETA_VERSION=1'.
Note: Changing the beta version can include other breaking changes. For more information, see http://ibm.biz/iks-cli-v1

FAILED
The cluster is not fully deployed yet. Wait a few minutes, then try again. (E0030)

Incident ID: 96a27ec8-007e-4f07-8e71-14534596e992

(base) MacBook-Pro:~ xiwanting$ ibmcloud ks cluster config --cluster bp5icu4d069a3hqakrgg
WARNING: The behavior of this command in your current CLI version is deprecated, and becomes unsupported when CLI version 1.0 is released in March 2020. To use the new behavior now, set the 'IKS_BETA_VERSION' environment variable. In bash, run 'export IKS_BETA_VERSION=1'.
Note: Changing the beta version can include other breaking changes. For more information, see http://ibm.biz/iks-cli-v1

FAILED
The cluster is not fully deployed yet. Wait a few minutes, then try again. (E0030)

Incident ID: 7f4966a0-d4e0-4dfd-b352-5e8c76396371

(base) MacBook-Pro:~ xiwanting$ ibmcloud ks cluster config --cluster bp5icu4d069a3hqakrgg
WARNING: The behavior of this command in your current CLI version is deprecated, and becomes unsupported when CLI version 1.0 is released in March 2020. To use the new behavior now, set the 'IKS_BETA_VERSION' environment variable. In bash, run 'export IKS_BETA_VERSION=1'.
Note: Changing the beta version can include other breaking changes. For more information, see http://ibm.biz/iks-cli-v1

OK
The configuration for bp5icu4d069a3hqakrgg was downloaded successfully.

Export environment variables to start using Kubernetes.

export KUBECONFIG=/Users/xiwanting/.bluemix/plugins/container-service/clusters/bp5icu4d069a3hqakrgg/kube-config-hou02-mycluster.yml

(base) MacBook-Pro:~ xiwanting$ export KUBECONFIG=/Users/xiwanting/.bluemix/plugins/container-service/clusters/bp5icu4d069a3hqakrgg/kube-config-hou02-mycluster.yml
(base) MacBook-Pro:~ xiwanting$ 
(base) MacBook-Pro:~ xiwanting$ export KUBECONFIG=/Users/xiwanting/.bluemix/plugins/container-service/clusters/bp5icu4d069a3hqakrgg/kube-config-hou02-mycluster.yml
(base) MacBook-Pro:~ xiwanting$ kubectl version --short
Client Version: v1.15.5
Server Version: v1.15.10+IKS
(base) MacBook-Pro:~ xiwanting$ kubectl create deployment sample-time-app --image=docker.io/lj1327/sample-time-app:latest
deployment.apps/sample-time-app created
(base) MacBook-Pro:~ xiwanting$ kubectl expose deployment/sample-time-app --type="NodePort" --port 8080
service/sample-time-app exposed
(base) MacBook-Pro:~ xiwanting$ kubectl get services
NAME              TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
kubernetes        ClusterIP   172.21.0.1      <none>        443/TCP          61m
sample-time-app   NodePort    172.21.210.93   <none>        8080:30534/TCP   17s
(base) MacBook-Pro:~ xiwanting$ 
